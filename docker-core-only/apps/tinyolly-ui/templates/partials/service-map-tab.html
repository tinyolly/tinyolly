<div id="map-content" class="tab-content">
    <div class="map-container"
        style="background: #fff; border: 1px solid #ddd; border-radius: 4px; height: 600px; position: relative; overflow: hidden;">
        <div id="service-map-cy" style="width: 100%; height: 100%; display: block;"></div>
        <div id="map-legend"
            style="position: absolute; top: 10px; right: 10px; background: rgba(255, 255, 255, 0.9); padding: 10px; border-radius: 6px; border: 1px solid #e2e8f0; font-size: 11px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); z-index: 10;">
            <div style="font-weight: 600; margin-bottom: 6px; color: #64748b;">Legend</div>
            <div style="display: flex; align-items: center; margin-bottom: 4px;">
                <div
                    style="width: 12px; height: 12px; background: #8b5cf6; transform: rotate(45deg); margin-right: 8px; border: 1px solid #7c3aed;">
                </div>
                <span>Client</span>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 4px;">
                <div
                    style="width: 12px; height: 12px; background: #0066CC; border-radius: 2px; margin-right: 8px; border: 1px solid #0052CC;">
                </div>
                <span>Server</span>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 4px;">
                <div
                    style="width: 12px; height: 10px; background: #10b981; border-radius: 0 0 2px 2px; border: 1px solid #059669; margin-right: 8px; position: relative;">
                    <div
                        style="position: absolute; top: -2px; left: -1px; width: 12px; height: 4px; background: #10b981; border: 1px solid #059669; border-radius: 50%;">
                    </div>
                </div>
                <span>Database</span>
            </div>
            <div style="display: flex; align-items: center; margin-bottom: 4px;">
                <div
                    style="width: 12px; height: 12px; background: #f59e0b; transform: skewX(-20deg); margin-right: 8px; border: 1px solid #d97706;">
                </div>
                <span>Messaging</span>
            </div>
            <div style="display: flex; align-items: center;">
                <div
                    style="width: 12px; height: 12px; background: #94a3b8; border-radius: 50%; margin-right: 8px; border: 1px solid #64748b;">
                </div>
                <span>Isolated (no connections)</span>
            </div>
        </div>
        <div id="map-loading" class="loading">
            <img src="/static/logo.svg" alt="Loading..."
                style="height: 48px; width: 48px; animation: spin 1.5s linear infinite;">
            <div style="margin-top: 12px;">Loading service map...</div>
        </div>

        <!-- Service Details Panel -->
        <div id="service-details-panel"
            style="display: none; position: absolute; top: 10px; left: 10px; width: 250px; background: rgba(255, 255, 255, 0.95); padding: 15px; border-radius: 8px; border: 1px solid #e2e8f0; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 20; backdrop-filter: blur(4px);">
            <div
                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-bottom: 1px solid #e2e8f0; padding-bottom: 8px;">
                <h3 id="details-title" style="margin: 0; font-size: 14px; font-weight: 600; color: #1e293b;">Service
                    Details</h3>
                <button onclick="document.getElementById('service-details-panel').style.display='none'"
                    style="background: none; border: none; cursor: pointer; font-size: 16px; color: #64748b;">&times;</button>
            </div>
            <div id="details-content" style="font-size: 12px; color: #475569;">
                <!-- Content populated by JS -->
            </div>
        </div>
    </div>
</div>